# Система оптимизации маршрутов склада

Программа для планирования оптимальных маршрутов сбора товаров на складе с графическим интерфейсом.

## Основные возможности

- Загрузка карт склада (PNG/JPG/BMP)
- Интерактивная разметка стен и стеллажей
- Размещение товаров с точками доступа
- Генерация оптимальных маршрутов сбора
- Работа с ограничениями по количеству товаров
- Экспорт результатов в CSV

## Алгоритмы

**Поиск пути:** A* для построения маршрута между точками

**Оптимизация маршрута (выборки = 5 товаров):**
- Полный перебор всех перестановок для точного решения задачи коммивояжера
- При количестве точек > 7 переключение на жадный алгоритм
- Предварительный расчет матрицы расстояний между всеми парами точек

**Оптимизация последовательности выборок:**
- Жадный алгоритм с локальными улучшениями (2-opt)
- Минимизация количества смен товаров между экспериментами
- Группировка по ночным сессиям (по 15 экспериментов)

## Установка

```bash
pip install numpy Pillow

# Быстрый запуск с автоустановкой зависимостей
python run.py
```

## Запуск

```bash
python main.py
```

## Использование

1. **Загрузите карту** склада (кнопка "Загрузить карту")
2. **Установите масштаб** (кликните 2 точки с известным расстоянием)
3. **Разметьте препятствия:**
   - "Рисовать стены" - кликами по точкам (ESC для сохранения)
   - "Рисовать стеллажи" - диагональю прямоугольника
4. **Загрузите товары** из CSV файла
5. **Разместите товары** на стеллажах (кликните на синие прямоугольники)
6. **Установите старт/финиш** в проходах (белые области)
7. **Генерируйте маршруты:**
   - Обычная генерация - случайные выборки
   - С ограничениями - учет количества товаров (столбец Amount в CSV)

## Формат CSV товаров

```csv
ID,Название,X,Y,Access_X,Access_Y,Amount
A001,Молоко пастеризованное,,,,,10
A002,Хлеб черный,,,,,5
```

## Результаты

- Изображения маршрутов: `output/routes/route_N.png`
- Данные маршрутов: `output/routes/route_N_info.json`
- Сводка в CSV: `output/routes/routes_summary.csv`

## Структура проекта

- `main.py` - точка входа
- `gui_manager.py` - графический интерфейс
- `map_processor.py` - обработка карт и поиск путей
- `route_optimizer.py` - оптимизация маршрутов и работа с товарами
- `run.py` - быстрый запуск с проверкой зависимостей